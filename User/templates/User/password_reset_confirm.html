{% extends 'PurBeurre/base.html' %}

{% block content %}
{% load static %}
        <!-- Masthead-->
        <header class="masthead">
            <div class="container px-4 px-lg-5 h-100">
                <div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-8 align-self-end">
                        <h1 class="text-white font-weight-bold">Du gras, oui, mais de qualité!</h1>
                        <hr class="divider" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <h2 class="text-white-75 mb-5">{% if user.is_authenticated %}
                                {{ user.username }}
                            {% endif %}</h2>
                    </div>
                </div>
            </div>
        </header>
        <!-- Services-->
        <section class="page-section" id="services">
            <div class="container px-4 px-lg-5">
                <h2 class="text-center mt-0">Réinitialisation de mot de passe</h2>
                <hr class="divider" />
            </div>
            <div class="row gx-4 gx-lg-5 justify-content-center mb-5">
                    <div class="col-lg-6">
                        <div class="col-lg-8 align-self-baseline">
                            {% if validlink %}
                            <h2>Réinitialisation de mot de passe </h2>
                            <p>Veuillez saisir votre nouveau mot de passe.</p>
                            <form method="post">
	                            {% csrf_token %}
	                            {% if form.new_password1.errors %}
		                            <ul class="alert alert-danger">
		                            {% for error in form.new_password1.errors %}
		                            <li>{{ error }}</li>
		                            {% endfor %}
		                            </ul>
	                            {% endif %}
	                            {% if form.new_password2.errors %}
		                            <ul class="alert alert-danger">
		                            {% for error in form.new_password2.errors %}
		                            <li>{{ error }}</li>
		                            {% endfor %}
		                            </ul>
	                            {% endif %}
	                            <table>
		                            <tr>
			                            <td>
				                            <label for="id_new_password1">Mon nouveau mot de passe :</label>
			                            </td>
			                            <td>{{ form.new_password1 }}</td>
		                            </tr>
		                            <tr>
			                            <td>
				                            <label for="id_new_password2">Confirmer mon nouveau mot de passe :</label>
			                            </td>
			                            <td>{{ form.new_password2 }}</td>
		                            </tr>
	                            </table>
	                            <button type="submit">Changer mon mot de passe</button>
                            </form>
                            {% else %}
                            <h2>Echec de réinitialisation du mot de passe</h2>
                            <p>Le lien de réinitialisation de mot de passe est invalide. Veuillez réessayer.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
        </section>


{% endblock %}